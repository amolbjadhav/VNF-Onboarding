# Licensed under the Apache License, Version 2.0 (the "License"); you may
# not use this file except in compliance with the License. You may obtain
# a copy of the License at
#
#         http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# For those usages not covered by the Apache License, Version 2.0 please
# contact:  osslegalrouting@vmware.com

vnfd:vnfd-catalog:
    vnfd:
    -   id: {get_input: vnfd_id}
        name: {get_input: vnfd_name}
        description: {{vnf_description}}
        vdu:
        -   id: {get_input: vdu_id}
            name: {get_input: vdu_name}
            vm-flavor:
                vcpu-count: {{ cpu }}
                memory-mb: {{ ram }}
                storage-gb: {{disk}}
            image: {{ image_id }}
               guest-epa:
                   mempage-size: {{ mempage_size}}
                   cpu-pinning-policy: {{ cpu_pinning_policy}}
                   numa-node-policy:
                       node-cnt: {{ numa_node_count}}
            interface:
            -   name: {{ nic1_name }}
                type: EXTERNAL
                virtual-interface:
                    type: {{ nic1_type }}
                external-connection-point-ref: {get_input: ext_con_pnt}
            -   name: {{ nic2_name }}
                type: EXTERNAL
                virtual-interface:
                    type: {{ nic2_type }}
                external-connection-point-ref: {get_input: ext_con_pnt}
            -   name: {{ nic3_name }}
                type: EXTERNAL
                virtual-interface:
                    type: {{ nic3_type }}
                external-connection-point-ref: {get_input: ext_con_pnt) {% if nic4_name %}
            -   name: {{ nic4_name }}
                type: EXTERNAL
                virtual-interface:
                    type: {{ nic4_type }}
                external-connection-point-ref: {get_input: ext_con_pnt) {% endif %} {% if nic5_name %}
            -   name: {{ nic5_name }}
                type: EXTERNAL
                virtual-interface:
                    type: {{ nic5_type }}
                external-connection-point-ref: {get_input: ext_con_pnt) {% endif %}
        connection-point:
            -   name: {get_input: ext_con_pnt}
                type: VPORT
